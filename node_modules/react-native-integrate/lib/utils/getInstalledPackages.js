"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPackageJsonPath = exports.getPackageJson = exports.getInstalledPackages = void 0;
const fs_1 = __importDefault(require("fs"));
const path_1 = __importDefault(require("path"));
const constants_1 = require("../constants");
const getProjectPath_1 = require("./getProjectPath");
function getInstalledPackages() {
    try {
        const packageJson = getPackageJson();
        return Object.entries({
            ...packageJson.dependencies,
            ...packageJson.devDependencies,
        });
    }
    catch (error) {
        console.error('Error fetching installed packages:', error);
        process.abort();
    }
}
exports.getInstalledPackages = getInstalledPackages;
function getPackageJson(projectPath = (0, getProjectPath_1.getProjectPath)()) {
    const packageJsonPath = getPackageJsonPath(projectPath);
    const packageJsonFile = fs_1.default.readFileSync(packageJsonPath, 'utf-8');
    return JSON.parse(packageJsonFile);
}
exports.getPackageJson = getPackageJson;
function getPackageJsonPath(projectPath = (0, getProjectPath_1.getProjectPath)()) {
    return path_1.default.join(projectPath, constants_1.Constants.PACKAGE_JSON_FILE_NAME);
}
exports.getPackageJsonPath = getPackageJsonPath;
