"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.addGCCapability = void 0;
const constants_1 = require("../../constants");
const applyObjectModification_1 = require("../../utils/applyObjectModification");
const plistTask_1 = require("../plistTask");
function addGCCapability(args) {
    let plistContent = (0, plistTask_1.readPListContent)(args.targetName, constants_1.Constants.PLIST_FILE_NAME, true);
    const capabilityValues = {
        GCSupportedGameControllers: args.controllers.map(x => mapsCapabilityRouting[x]),
    };
    plistContent = (0, applyObjectModification_1.applyObjectModification)(plistContent, {
        set: capabilityValues,
        strategy: 'merge_distinct',
    });
    (0, plistTask_1.writePListContent)(plistContent, args.targetName);
}
exports.addGCCapability = addGCCapability;
const mapsCapabilityRouting = {
    extended: 'ExtendedGamepad',
    micro: 'MicroGamepad',
    directional: 'DirectionalGamepad',
};
